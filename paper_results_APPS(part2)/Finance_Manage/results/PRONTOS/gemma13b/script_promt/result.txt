import androidx.test.espresso.Espresso;
import androidx.test.espresso.ViewInteraction;
import androidx.test.espresso.matcher.ViewMatchers;
import androidx.test.ext.junit.runners.AndroidJUnit4;
import org.junit.Test;
import static androidx.test.espresso.action.ViewActions.*;
import static androidx.test.espresso.assertion.ViewAssertions.*;
import static org.hamcrest.Matchers.allOf;

@RunWith(AndroidJUnit4.class)
public class NewTransactionScreenTest {

    @Test
    public void createNewExpenseTransaction() {
        // 1. Open the "New Transaction" screen (Assuming you have a way to navigate there - e.g., button click).
        // Replace this with your actual navigation code.  For example:
        //   Espresso.onView(withText("Add Transaction")).perform(click());

        // 2. Enter the transaction title
        ViewInteraction titleField = Espresso.onView(
                allOf(withId(R.id.transaction_title_edittext), // Replace with actual ID of the edit text field
                        childAtPosition(withClassName("android.widget.LinearLayout"), 0)))
                .perform(scrollTo(), click())
                .perform(typeText("Grocery Shopping"));

        // 3. Select "Expense" radio button (Assuming you know the IDs or other selectors)
        ViewInteraction expenseRadioButton = Espresso.onView(allOf(withId(R.id.expense_radiobutton), // Replace with actual ID
                        childAtPosition(withClassName("android.widget.LinearLayout"), 1)))
                .perform(click());

        // 4. Enter the amount
        ViewInteraction amountField = Espresso.onView(
                allOf(withId(R.id.amount_edittext), // Replace with actual ID
                        childAtPosition(withClassName("android.widget.LinearLayout"), 2)))
                .perform(scrollTo(), click())
                .perform(typeText("50.00"));

        // 5. Click the Submit button (Replace with actual ID)
        ViewInteraction submitButton = Espresso.onView(withId(R.id.submit_button))
                .perform(click());

        // 6. Verify that a success message or navigation to transaction list occurs.  Adapt this assertion based on your app's behavior.
        Espresso.onView(withText("Transaction Saved")).check(matches(isDisplayed())); // Example: Check for a "Transaction Saved" text.
    }
}
