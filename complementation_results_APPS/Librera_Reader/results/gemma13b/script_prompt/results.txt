import androidx.test.espresso.Espresso
import androidx.test.espresso.ViewInteraction
import androidx.test.espresso.action.ViewActions
import androidx.test.espresso.assertion.ViewAssertions
import androidx.test.ext.junit.runners.AndroidJUnit4
import org.junit.Test
import org.junit.runner.RunWith

@RunWith(AndroidJUnit4::class)
class LibraryScreenTest {

    @Test
    fun testSearchFunctionality() {
        // 1. Click on the "Find" text field
        val findEditText = Espresso.onView(withId(R.id.find_edit_text)) // Replace R.id.find_edit_text with actual ID
            .perform(ViewActions.click())

        // 2. Enter a search term (e.g., "Fiction")
        findEditText.perform(ViewActions.typeText("Fiction"))

        // 3. Press Enter/Submit
        findEditText.perform(ViewActions.enter())

        // 4. Assert that the RecyclerView is displayed and contains items after searching
        Espresso.onView(withId(R.id.recyclerView)) // Replace R.id.recyclerView with actual ID
            .check(ViewAssertions.matches(ViewMatchers.isDisplayed()))
            .check(ViewAssertions.matches(hasItemsCountGreaterThan(0)))  // Check if there are items

    }

    @Test
    fun testCategoryNavigation() {
        // 1. Click on the "Folder" tab
        val folderTab = Espresso.onView(withId(R.id.folder_tab)) // Replace R.id.folder_tab with actual ID
            .perform(ViewActions.click())

        // 2. Assert that the RecyclerView content changes (basic check)
        Espresso.onView(withId(R.id.recyclerView))
            .check(ViewAssertions.matches(ViewMatchers.isDisplayed())) // Ensure it's still visible

        // 3. Click on "Recent" tab
        val recentTab = Espresso.onView(withId(R.id.recent_tab))  // Replace R.id.recent_tab with actual ID
            .perform(ViewActions.click())

        //4. Assert that the RecyclerView content changes (basic check)
        Espresso.onView(withId(R.id.recyclerView))
            .check(ViewAssertions.matches(ViewMatchers.isDisplayed())) // Ensure it's still visible
    }
}
